(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{32:function(e,t,n){},40:function(e,t,n){},42:function(e,t,n){},43:function(e,t,n){},50:function(e,t,n){},69:function(e,t,n){},70:function(e,t,n){},71:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),c=n(33),s=n.n(c),u=(n(40),n(2)),o=n.n(u),i=n(3),l=n(6),j=(n(42),n(4)),d=n(8),b=(n(43),n(0));function p(e){var t=e.currentUser,n=e.handleLogout;return Object(b.jsx)("div",{className:"nav-container",children:Object(b.jsxs)("div",{className:"grid-container",children:[Object(b.jsxs)("div",{className:"title-container",children:[Object(b.jsx)("div",{className:"title",children:"A Twitter Clone"}),Object(b.jsx)("div",{className:"sub-title",children:"Except you can only post as Sopranos Characters"})]}),Object(b.jsx)("div",{children:t?Object(b.jsxs)(b.Fragment,{children:[Object(b.jsxs)("div",{className:"welcome",children:["Hello, ",t.name]}),Object(b.jsx)(b.Fragment,{children:Object(b.jsxs)("div",{className:"nav-controls",children:[Object(b.jsx)(d.b,{to:"/",children:Object(b.jsx)("button",{className:"nav-buttons",children:"Home"})}),Object(b.jsx)(d.b,{to:"/posts/new",children:Object(b.jsx)("button",{className:"nav-buttons",children:"New Post"})}),Object(b.jsx)("button",{className:"nav-buttons",onClick:n,children:"Logout"})]})})]}):Object(b.jsx)(d.b,{className:"nav-controls",to:"/login",children:Object(b.jsx)("button",{className:"nav-buttons",children:"Login / Register"})})})]})})}function h(e){var t=e.currentUser,n=e.handleLogout;return Object(b.jsxs)("div",{children:[Object(b.jsx)(p,{currentUser:t,handleLogout:n}),e.children]})}var f=n(13),O=n(11);function v(e){var t=Object(r.useState)({name:"",password:""}),n=Object(l.a)(t,2),a=n[0],c=n[1],s=a.name,u=a.password,o=e.handleLogin,i=function(e){var t=e.target,n=t.name,r=t.value;c((function(e){return Object(O.a)(Object(O.a)({},e),{},Object(f.a)({},n,r))}))};return Object(b.jsx)("div",{className:"signup-container",children:Object(b.jsxs)("form",{className:"signup-form",onSubmit:function(e){e.preventDefault(),o(a)},children:[Object(b.jsxs)("label",{children:["Username:",Object(b.jsx)("input",{type:"text",name:"name",value:s,onChange:i})]}),Object(b.jsx)("br",{}),Object(b.jsxs)("label",{children:["Password:",Object(b.jsx)("input",{type:"password",name:"password",value:u,onChange:i})]}),Object(b.jsx)("br",{}),Object(b.jsxs)("div",{children:[Object(b.jsx)(d.b,{to:"/register",children:Object(b.jsx)("button",{className:"submit-button",children:"Register"})}),Object(b.jsx)("button",{className:"submit-button",children:"Submit"})]})]})})}n(50);function x(e){var t=Object(r.useState)({name:"",email:"",password:""}),n=Object(l.a)(t,2),a=n[0],c=n[1],s=a.name,u=a.email,o=a.password,i=e.handleRegister,j=function(e){var t=e.target,n=t.name,r=t.value;c((function(e){return Object(O.a)(Object(O.a)({},e),{},Object(f.a)({},n,r))}))};return Object(b.jsx)("div",{className:"signup-container",children:Object(b.jsxs)("form",{className:"signup-form",onSubmit:function(e){e.preventDefault(),i(a)},children:[Object(b.jsxs)("label",{children:["Username:",Object(b.jsx)("input",{type:"text",name:"name",value:s,onChange:j})]}),Object(b.jsx)("br",{}),Object(b.jsxs)("label",{children:["Email:",Object(b.jsx)("input",{type:"text",name:"email",value:u,onChange:j})]}),Object(b.jsx)("br",{}),Object(b.jsxs)("label",{children:["Password:",Object(b.jsx)("input",{type:"password",name:"password",value:o,onChange:j})]}),Object(b.jsx)("br",{}),Object(b.jsx)("button",{className:"submit-button",children:"Submit"})]})})}var m=n(17),w=n(35),g=n.n(w).a.create({baseURL:"https://sopranos-twitter-backend.herokuapp.com/"}),N=function(){var e=Object(i.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.get("/posts");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),k=function(){var e=Object(i.a)(o.a.mark((function e(t,n){var r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.post("/characters/".concat(n,"/posts/"),{post:t});case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),y=function(){var e=Object(i.a)(o.a.mark((function e(t,n){var r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.put("/posts/".concat(t),{post:n});case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),S=function(){var e=Object(i.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.delete("/posts/".concat(t));case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),C=function(){var e=Object(i.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.put("/".concat(t,"/upvote"));case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),U=function(){var e=Object(i.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.put("/".concat(t,"/downvote"));case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),D=function(){var e=Object(i.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.get("/characters");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();n(69);function L(e){var t=e.posts,n=e.handleDelete,r=e.currentUser,a=e.handleUpvote,c=e.handleDownvote,s=e.voted,u=e.setSortType;return Object(b.jsxs)("div",{children:[Object(b.jsx)("div",{className:"selection",children:Object(b.jsxs)("select",{onChange:function(e){return u(e.target.value)},children:[Object(b.jsx)("option",{value:"date",children:"Date - newest"}),Object(b.jsx)("option",{value:"score",children:"Score - highest"})]})}),t.map((function(e){return Object(b.jsxs)("div",{className:"post",children:[Object(b.jsx)("img",{src:e.character.img_url,alt:"character",className:"character-image"}),null!==r&&Object(b.jsx)(b.Fragment,{children:Object(b.jsx)("button",{className:s.includes(e.id)?"upvoted":"post-upvote-button",disabled:s.includes(e.id),onClick:function(){return a(e.id)},children:"\u21e7"})}),null!==r&&Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("div",{className:"post-score",children:e.score}),Object(b.jsxs)("button",{className:s.includes(e.id)?"downvoted":"post-downvote-button",disabled:s.includes(e.id),onClick:function(){return c(e.id,e.score)},children:["\u21e9"," "]})]}),Object(b.jsxs)("div",{className:"post-text",children:[Object(b.jsx)("div",{className:"post-content",children:e.content}),Object(b.jsxs)("div",{className:"post-credits",children:[e.character.name," aka ",e.user.name]})]}),Object(b.jsx)("div",{className:"user-controls",children:(null===r||void 0===r?void 0:r.id)===e.user_id&&Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(d.b,{to:"/posts/edit/".concat(e.id),children:Object(b.jsx)("button",{className:"post-edit-button",children:"\ud83d\udd8a"})}),Object(b.jsx)("button",{className:"post-delete-button",onClick:function(){return n(e.id)},children:"\u274c"})]})})]},e.id)})),Object(b.jsx)("div",{className:"bottom-border"})]})}n(70);function T(e){var t=e.posts,n=e.handleDelete,r=e.currentUser,a=e.handleUpvote,c=e.handleDownvote,s=e.setSortType,u=e.voted;return Object(b.jsx)("div",{children:Object(b.jsx)("div",{className:"posts-feed",children:Object(b.jsx)(L,{posts:t,handleDelete:n,currentUser:r,handleUpvote:a,handleDownvote:c,voted:u,setSortType:s})})})}n(32);function F(e){var t=e.handleCreate,n=e.characters,a=Object(r.useState)({content:"",character_id:""}),c=Object(l.a)(a,2),s=c[0],u=c[1],o=s.content,i=s.character_id,j=function(e){var t=e.target,n=t.name,r=t.value;u((function(e){return Object(O.a)(Object(O.a)({},e),{},Object(f.a)({},n,r))}))};return Object(b.jsx)("div",{className:"post-creation-container",children:Object(b.jsx)("div",{children:Object(b.jsxs)("form",{className:"post-creation",onSubmit:function(e){e.preventDefault(),t(s,i)},children:[Object(b.jsx)("textarea",{maxLength:"180",placeholder:"Max length - 180 characters.",className:"text-field",name:"content",value:o,onChange:j}),Object(b.jsxs)("div",{children:[Object(b.jsxs)("select",{onChange:j,defaultValue:"default",name:"character_id",children:[Object(b.jsx)("option",{value:"default",disabled:!0,children:"-- Select a character --"}),n.map((function(e){return Object(b.jsx)("option",{value:e.id,children:e.name},e.id)}))]}),Object(b.jsx)("button",{className:"submit-button",children:"Submit"})]})]})})})}function E(e){var t=Object(r.useState)({content:""}),n=Object(l.a)(t,2),a=n[0],c=n[1],s=a.content,u=Object(j.g)().id,o=e.posts,i=e.handleUpdate;Object(r.useEffect)((function(){o.length&&function(){var e=o.find((function(e){return e.id===Number(u)}));c({content:e.content})}()}),[o,u]);return Object(b.jsx)("div",{className:"post-creation-container",children:Object(b.jsxs)("form",{className:"post-creation",onSubmit:function(e){e.preventDefault(),i(u,a)},children:[Object(b.jsx)("label",{children:Object(b.jsx)("textarea",{maxLength:"180",className:"text-field",name:"content",value:s,onChange:function(e){var t=e.target,n=t.name,r=t.value;c((function(e){return Object(O.a)(Object(O.a)({},e),{},Object(f.a)({},n,r))}))}})}),Object(b.jsx)("button",{className:"submit-button",children:"Submit"})]})})}function I(e){var t=Object(r.useState)([]),n=Object(l.a)(t,2),a=n[0],c=n[1],s=Object(r.useState)([]),u=Object(l.a)(s,2),d=u[0],p=u[1],h=Object(r.useState)("date"),f=Object(l.a)(h,2),O=f[0],v=f[1],x=Object(r.useState)([]),w=Object(l.a)(x,2),g=w[0],L=w[1],I=Object(j.f)(),B=e.currentUser;Object(r.useEffect)((function(){(function(){var e=Object(i.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N();case 2:t=e.sent,c(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(r.useEffect)((function(){!function(e){var t={date:"id",score:"score"}[e],n=Object(m.a)(a).sort((function(e,n){return n[t]-e[t]}));c(n)}(O)}),[O]),Object(r.useEffect)((function(){(function(){var e=Object(i.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D();case 2:t=e.sent,p(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]);var P=function(){var e=Object(i.a)(o.a.mark((function e(t,n){var r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k(t,n);case 2:r=e.sent,c((function(e){return[r].concat(Object(m.a)(e))})),I.push("/");case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),R=function(){var e=Object(i.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S(t);case 2:c((function(e){return e.filter((function(e){return e.id!==t}))}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),_=function(){var e=Object(i.a)(o.a.mark((function e(t,n){var r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y(t,n);case 2:r=e.sent,c((function(e){return e.map((function(e){return e.id===Number(t)?r:e}))})),I.push("/");case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),z=function(){var e=Object(i.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C(t);case 2:n=e.sent,c((function(e){return e.map((function(e){return e.id===Number(t)?n:e}))})),L((function(e){return[].concat(Object(m.a)(e),[t])}));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),A=function(){var e=Object(i.a)(o.a.mark((function e(t,n){var r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n<-10)){e.next=6;break}return e.next=3,R(t);case 3:c((function(e){return e.filter((function(e){return e.id!==Number(t)}))})),e.next=11;break;case 6:return e.next=8,U(t);case 8:r=e.sent,c((function(e){return e.map((function(e){return e.id===Number(t)?r:e}))})),L((function(e){return[].concat(Object(m.a)(e),[t])}));case 11:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();return Object(b.jsxs)(j.c,{children:[Object(b.jsx)(j.a,{exact:!0,path:"/",children:Object(b.jsx)(T,{posts:a,currentUser:B,handleDelete:R,handleUpvote:z,handleDownvote:A,setSortType:v,voted:g})}),Object(b.jsx)(j.a,{path:"/posts/new",children:Object(b.jsx)(F,{handleCreate:P,characters:d})}),Object(b.jsx)(j.a,{path:"/posts/edit/:id",children:Object(b.jsx)(E,{posts:a,handleUpdate:_,characters:d})})]})}var B=function(){var e=Object(i.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.post("/auth/login",{authentication:t});case 2:return n=e.sent,localStorage.setItem("authToken",n.data.token),g.defaults.headers.common.authorization="Bearer ".concat(n.data.token),e.abrupt("return",n.data.user);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),P=function(){var e=Object(i.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.post("/users/",{user:t});case 2:return n=e.sent,localStorage.setItem("authToken",n.data.token),g.defaults.headers.common.authorization="Bearer ".concat(n.data.token),e.abrupt("return",n.data.user);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),R=function(){var e=Object(i.a)(o.a.mark((function e(){var t,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=localStorage.getItem("authToken"))){e.next=7;break}return g.defaults.headers.common.authorization="Bearer ".concat(t),e.next=5,g.get("/auth/verify");case 5:return n=e.sent,e.abrupt("return",n.data);case 7:return e.abrupt("return",null);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();var _=function(){var e=Object(r.useState)(null),t=Object(l.a)(e,2),n=t[0],a=t[1],c=Object(j.f)();Object(r.useEffect)((function(){(function(){var e=Object(i.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R();case 2:t=e.sent,a(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]);var s=function(){var e=Object(i.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B(t);case 2:n=e.sent,a(n),c.push("/");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),u=function(){var e=Object(i.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P(t);case 2:n=e.sent,a(n),c.push("/");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(b.jsx)("div",{className:"App",children:Object(b.jsx)(h,{currentUser:n,handleLogout:function(){a(null),localStorage.removeItem("authToken"),g.defaults.headers.common.authorization=null},children:Object(b.jsxs)(j.c,{children:[Object(b.jsx)(j.a,{path:"/login",children:Object(b.jsx)(v,{handleLogin:s})}),Object(b.jsx)(j.a,{path:"/register",children:Object(b.jsx)(x,{handleRegister:u})}),Object(b.jsx)(j.a,{path:"/",children:Object(b.jsx)(I,{currentUser:n})})]})})})},z=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,72)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,s=t.getTTFB;n(e),r(e),a(e),c(e),s(e)}))};s.a.render(Object(b.jsx)(a.a.StrictMode,{children:Object(b.jsx)(d.a,{children:Object(b.jsx)(_,{})})}),document.getElementById("root")),z()}},[[71,1,2]]]);
//# sourceMappingURL=main.775b7491.chunk.js.map